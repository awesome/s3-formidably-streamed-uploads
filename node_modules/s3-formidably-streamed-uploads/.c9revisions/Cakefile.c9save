{"ts":1356028005579,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1356028045989,"patch":[[{"diffs":[[1,"fs = require 'fs'\r\nrimraf = require 'rimraf'\r\n\r\n{print} = require 'util'\r\n{spawn} = require 'child_process'\r\n\r\nexecCommand = (command, options, cb) ->\r\n  commandProc = spawn command, options\r\n  commandProc.stderr.on 'data', (data) ->\r\n    process.stderr.write data.toString()\r\n  commandProc.stdout.on 'data', (data) ->\r\n    print data.toString()\r\n  commandProc.on 'exit', (code) ->\r\n    if code is 0\r\n      console.log \"Completed executing #{command}\"\r\n      cb?()\r\n    else\r\n      console.log \"Command #{command} ended with exit code: #{code}\"\r\n\r\nclean = (cb) ->\r\n  rimraf './app-compiled', ->\r\n    fs.mkdir './app-compiled', cb\r\n\r\ncoffeeCall = (compileOption = '', cb) ->\r\n  execCommand 'coffee', [\"-c#{compileOption}\", '-o', 'app-compiled', 'app'], cb\r\n\r\nbuild = (cb) ->\r\n  clean ->\r\n    coffeeCall '', cb\r\n\r\nlocal = (cb) ->\r\n  build ->\r\n    coffeeCall 'w'\r\n    execCommand 'nodemon', ['--delay','7','--watch', 'app-compiled'], cb\r\n\r\ndebug = (cb) ->\r\n  build ->\r\n    coffeeCall 'w'\r\n    execCommand 'nodemon', ['--debug','--delay','7','--watch', 'app-compiled'], cb\r\n\r\ndeploy = ->\r\n  execCommand 'jitsu', ['-c', 'deploy']\r\n\r\ntask 'clean', 'Clean compiled js files in \\'app-compiled\\'', ->\r\n  clean ->\r\n    console.log '\\'app-compiled\\' cleaned.'\r\n\r\ntask 'build', 'Build app-compiled/ from app/', ->\r\n  build()\r\n\r\ntask 'watch', 'Build and watch files', ->\r\n  local()\r\n\r\ntask 'debug', 'Debug app using node-inspector', ->\r\n  debug()\r\n\r\ntask 'deploy', 'Deploy app to Nodejitsu', ->\r\n  build ->\r\n    deploy()\r\n\r\n# https://github.com/TrevorBurnham/connect-assets/blob/master/Cakefile\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1583}]],"length":1583,"saved":false}
{"ts":1356028222784,"patch":[[{"diffs":[[0,"mraf './"],[-1,"app-compiled"],[1,"lib"],[0,"', ->\r\n "]],"start1":569,"start2":569,"length1":28,"length2":19},{"diffs":[[0,"kdir './"],[-1,"app-compiled"],[1,"lib"],[0,"', cb\r\n\r"]],"start1":595,"start2":595,"length1":28,"length2":19},{"diffs":[[0,"', '"],[-1,"app-compiled"],[1,"lib"],[0,"', '"],[-1,"app"],[1,"src"],[0,"'], "]],"start1":707,"start2":707,"length1":27,"length2":18},{"diffs":[[0,"eeCall 'w'\r\n    "],[1,"#"],[0,"execCommand 'nod"]],"start1":822,"start2":822,"length1":32,"length2":33},{"diffs":[[0,"'--watch', '"],[-1,"app-compiled"],[1,"lib"],[0,"'], cb\r\n\r\nde"]],"start1":877,"start2":877,"length1":36,"length2":27},{"diffs":[[0,"w'\r\n    "],[1,"#"],[0,"execComm"]],"start1":947,"start2":947,"length1":16,"length2":17},{"diffs":[[0,"atch', '"],[-1,"app-compiled"],[1,"lib"],[0,"'], cb\r\n"]],"start1":1008,"start2":1008,"length1":28,"length2":19},{"diffs":[[0,"es in \\'"],[-1,"app-compiled"],[1,"lib"],[0,"\\'', ->\r"]],"start1":1121,"start2":1121,"length1":28,"length2":19},{"diffs":[[0,".log '\\'"],[-1,"app-compiled"],[1,"lib"],[0,"\\' clean"]],"start1":1164,"start2":1164,"length1":28,"length2":19},{"diffs":[[0,"ild "],[-1,"app-compiled"],[1,"lib"],[0,"/ from "],[-1,"app"],[1,"src"],[0,"/', "]],"start1":1208,"start2":1208,"length1":30,"length2":21},{"diffs":[[0,"\r\n\r\n"],[-1,"task 'debug', 'Debug app using node-inspector', ->\r\n  debug()\r\n\r\ntask 'deploy', 'Deploy app to Nodejitsu', ->\r\n  build ->\r\n    deploy()\r\n\r\n"],[0,"# ht"]],"start1":1298,"start2":1298,"length1":147,"length2":8}]],"length":1374,"saved":false}
{"ts":1356028348364,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"deploy = ->\r\n  execCommand 'jitsu', ['-c', 'deploy']\r\n\r\n"],[0,"task"]],"start1":1025,"start2":1025,"length1":64,"length2":8}]],"length":1318,"saved":false}
